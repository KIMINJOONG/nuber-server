### 어떻게 API를 만들고 user를 인증하는지에 대한 내용

---

JWT를 만들고 그 토큰을 적어주면된다. JWT token을 만드는건 아주 쉬움. createJWT.ts참고
MIT 라이브러리나 middleware나 아무것도 필요없음 그냥 만들면된다.

###에러 발생사항

---

그래프ql의 playground에서 만들어놓은 서비스딴이 잘 되고 있는지 테스트하던도중
EmailSignIn이 부분이 에러가 났다. cant not return null이였나? 하는 에러였는데 null이 리턴될리가 없는데 하고 생각해보니
파일의 이름을 EmailSignIn.resolvers.ts 이거인데 resolver로 해서 저게 내가 설정해둔
모든 폴더들에서 resolvers 파일을 찾아서 그것들을 하나로 합쳐 graphql에 입력할텐데 resolver라고 했기때문에 찾지못했던것!
설정은 schema.ts를 보면 다음과 같이 되어있다.
`const allResolvers: any[] = fileLoader( path.join(__dirname, "./api/**/*.resolvers.*") );`

### 메모

---

그래프ql api에는 url이 없다 api만드는건 url을 신경쓸 문제가 아님 폴더를 만들고 resolver만 만들어주면된다.

### JWT를 생성했다면 그걸 어떻게 열까???

---

엄청 쉬운건데 사람들은 어떻게 하는지모름 바로 나만의 미들웨어를 만들면된다!!
app.ts에 만들것임.
토큰은 http header에 있을것이다.
만약 token이 있으면 토큰을 열고 그 id를 가진 유저를 찾을것임 유저를 만들때 id를 그 token안에다가 집어넣었음

`const createJWT = (userId: number): string => { const token = jwt.sign( { id: userId }, process.env.JWT_TOKEN || "" ); return token; }`

createJWT.ts파일을 보면 위와같다. id: userId 즉 토큰과 userid가 있음
따라서 이 id를 찾아야하고, user를 받아야함
